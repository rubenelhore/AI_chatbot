<!DOCTYPE html>
<html>
<head>
    <title>Test Firebase Connection</title>
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js';
        import { getAuth, signInAnonymously } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js';
        import { getFunctions, httpsCallable } from 'https://www.gstatic.com/firebasejs/10.0.0/firebase-functions.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDhcDjDvKd6Iz2hGcTg8eN0v0dveF_DwOg",
            authDomain: "ai-chatbot-c0bed.firebaseapp.com",
            projectId: "ai-chatbot-c0bed",
            storageBucket: "ai-chatbot-c0bed.firebasestorage.app",
            messagingSenderId: "919555208445",
            appId: "1:919555208445:web:87f842a88ed8adb7703a94"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const functions = getFunctions(app);

        async function testFunction() {
            try {
                console.log('Signing in anonymously...');
                await signInAnonymously(auth);
                console.log('User authenticated:', auth.currentUser.uid);

                console.log('Calling processDocument function...');
                const processDocument = httpsCallable(functions, 'processDocument');

                const result = await processDocument({
                    documentId: 'test-doc-id',
                    filePath: 'test/path.pdf',
                    fileName: 'test.pdf',
                    fileType: 'application/pdf'
                });

                console.log('Function result:', result);
                document.getElementById('result').textContent = 'Success: ' + JSON.stringify(result.data);
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('result').textContent = 'Error: ' + error.message;
            }
        }

        window.testFunction = testFunction;
    </script>
</head>
<body>
    <h1>Firebase Function Test</h1>
    <button onclick="testFunction()">Test processDocument Function</button>
    <pre id="result">Click button to test</pre>
</body>
</html>